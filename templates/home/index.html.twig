{% extends 'base.html.twig' %}

{% block title %}Hello PhotoController!{% endblock %}

{% block body %}



    <h1>Liste des photos</h1>

    <div class="photo-wrap">
        {% for photo in photos %}
        <figure>
            <a class="myBtn" data-photo="{{ photo.id }}" href="">
                <img class="photo_view" src="{{ asset('img/' ~ photo.path ) }}" alt="{{ photo.title }}">
            </a>
            
            <figcaption><div>
                            <a  href="{{ path('profil', {'id':photo.user.id}) }}">

                                    <img class="profil_photo" src="{{ asset('img/' ~ photo.user.photoProfil) }}" alt="{{photo.user.nickname}}">
                                    &nbsp;{{ photo.user.nickname }}

                            </a>
                        </div>
                        <div>
                            <i class="far fa-comment"></i> {{ photo.Comments | length }}</a>
                            <i class="far fa-thumbs-up"></i> {{ photo.nbLike }}
                        </div>
            </figcaption>
        </figure>

        {% endfor %}
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>

            // Get the button that opens the modal
        $(document).ready(function(){
            $(".myBtn").on("click", function(e){
                e.preventDefault()
                
                let photoid = $(this).data("photo")
                $.get(
                    "{{ path('ajax_show') }}",
                    {
                        "photoid" : photoid
                    },
                    function(data){
                        $("#myModal .modal-body").html(data)
                    }
                )
            })
        })

        
    </script>

{% endblock %}